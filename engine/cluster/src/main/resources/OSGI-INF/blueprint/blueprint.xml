<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0">
    <bean id="graphManager" class="org.opennms.oce.engine.cluster.GraphManager" factory-method="newGraphManager"/>
    <reference-list interface="org.opennms.oce.features.graph.api.ManagedGraph" availability="optional">
        <reference-listener bind-method="onBind" unbind-method="onUnbind" ref="graphManager"/>
    </reference-list>

    <!-- Create and expose the engine factory -->
    <service interface="org.opennms.oce.engine.api.EngineFactory">
        <bean class="org.opennms.oce.engine.cluster.ClusterEngineFactory">
            <property name="graphManager" ref="graphManager"/>
        </bean>
    </service>
</blueprint>
